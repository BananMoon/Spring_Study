## 커넥션 풀은 어쩌다 등장했는가?
JDBC 노트에서 살펴봤듯, 데이터베이스 커넥션을 획득할 때 매우 복잡한 과정을 거치게 된다.
(여기에 매 커넥션 생성마다 DB: 내부 인증 + DB 세션 생성까지 진행된다.)

이렇듯 DB에서도 많은 리소스&시간이 소모되고, 
애플리케이션 서버에서도 TCP/IP 커넥션을 생성하기 위한 리소스를 매번 사용해야 하고,
최종 문제는 클라이언트가 결과를 응답받기까지의 시간에 영향을 준다는 점이다.

이를 한번에 해결하는 아이디어가 *커넥션을 미리 생성해두고 사용하는 커넥션 풀*이라는 방법이다.

## 커넥션 풀이 뭐지?
미리 커넥션을 지정된 갯수(기본값:10개) 만큼 확보해서 커넥션 풀에 보관해놓는 것이다.
해당 갯수만큼의 커넥션들은 이미 TCP/IP로 DB와 커넥션이 연결되어있고, DB 세션 또한 생성되어있기 때문에 **즉시 SQL을 DB에 전달할 수 있는 상태**이다.

동작 방식
1. 애플리케이션 로직에서 커넥션 풀에서 커넥션 조회
2. 커넥션 풀에 커넥션을 요청하면, 커넥션 하나를 반환
3. 받은 커넥션을 사용해서 SQL을 DB에 전달하고 결과를 받아서 처리 (커넥션 생성 시간이 사라짐!)
4. 커넥션을 종료하지 않고 살아있는 상태로 커넥션 풀에 반환

서버 당 커넥션 풀 내 최대 커넥션 갯수를 제한할 수 있어서 DB를 보호해주는 효과도 있다.

대표적인 커넥션 풀 오픈 소스는 `commons-dbcp2`, `tomcat-jdbc pool`, `HikariCP` 등이 있고 최근 대부분의 프로젝트에서는 기본으로 `hikariCP`를 사용한다.



## DataSource는 어쩌다 등장했는가?

커넥션을 획득하는 방법은 아래와 같다.
1. DriverManager를 통해 매 신규 커넥션 생성
2. 커넥션 풀에서 커넥션 조회
	- DBCP2 커넥션 풀, HikariCP 커넥션 풀 등 존재

커넥션을 획득하는 방법에도 다양한 방법이 있기 때문에, 이를 바꿀 때마다 애플리케이션 로직을 바꿔야하고 사용법도 조금씩 바꿔줘야하는 번거로움이 있었다.

결국 자바에서 이러한 문제를 해결하고자 **커넥션을 획득하는 방법을 추상화**하는 방안으로 나온 것이 `java.sql.DataSource`  인터페이스이다.
그리고 커넥션 획득 방법들마다 구현체를 만들어서 커넥션 획득 기술을 구현하도록 하였다.

> 주의! 아쉽게도 `DriverManager`는 `DataSource` 인터페이스를 구현하지 않고 있기 때문에, 스프링에서는 `DataSource` 인터페이스를 구현하는 `DriverManagerDataSource` 클래스를 제공한다.
